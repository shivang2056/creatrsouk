<%= render layout: "shared/edit_product" do %>
  <div class="transition-all border border-gray-200 rounded-md bg-white p-4 mb-4">
    <div class="flex flex-col gap-1 w-full mb-4">
      <div class="flex items-center">
        <h1 class="text-lg pb-0.5 leading-6 font-medium text-gray-900 mr-2 flex items-center">List of Attachments</h1>
      </div>
    </div>

    <% @product.attachments.each do |attachment| %>
      <div class="flex justify-between border rounded-md rounded w-1/2 my-4 p-2">
        <div class="flex space-x-4">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-10 text-gray-900">
            <path fill-rule="evenodd" d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z" clip-rule="evenodd" />
            <path d="M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z" />
          </svg>

          <div class="flex flex-col">
            <div class="text-gray-900">
              <%= attachment.name %>
            </div>

            <div class="text-xs text-gray-500 flex justify-between">
              <span> <%= Marcel::EXTENSIONS.key(attachment.file.blob.content_type).upcase %> </span>
              <span> <%= number_to_human_size(attachment.file.byte_size) %> </span>
            </div>
          </div>
        </div>

        <div class="flex my-auto space-x-2">
          <%= link_to rails_blob_path(attachment.file, disposition: 'attachment'), class: "text-sm border hover:bg-gray-300 text-gray-500 hover:text-gray-700 border-gray-500 rounded-md py-1 px-1.5 h-[29px]" do %>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 22 22" stroke-width="1.5" stroke="currentColor" class="size-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
            </svg>
          <% end %>

          <%= form_with url: product_attachment_path(@product.id, attachment.id), method: :delete, data: { turbo: false } do |form| %>
            <%= form.button class: "text-sm border hover:bg-gray-300 text-gray-500 hover:text-gray-700 border-gray-500 rounded-md p-1" do %>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
              </svg>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="transition-all border border-gray-200 rounded-md bg-white p-4">
    <div class="flex flex-col gap-1 w-full mb-4">
      <div class="flex items-center">
        <h1 class="text-lg pb-0.5 leading-6 font-medium text-gray-900 mr-2 flex items-center">Add Attachment</h1>
      </div>
    </div>

    <%= form_with(model: @product.attachments.new, url: product_attachments_path(@product), class: "space-y-4 w-1/2") do |form| %>
      <div>
        <%= form.label :name, class: "flex items-center gap-1 text-sm font-medium text-gray-700" %>
        <%= form.text_field :name, required: true, class: "appearance-none block w-full px-3 py-2 h-5 mt-1 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm h-full border-gray-300 opacity-100" %>
      </div>

      <div>
        <%= form.label :file, class: "flex items-center gap-1 text-sm font-medium text-gray-700" %>
        <%= form.file_field :file, required: true, class: "appearance-none block w-full px-3 py-2 h-5 mt-1 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm h-full border-gray-300 opacity-100" %>
      </div>

      <div class="pt-8">
        <%= form.submit "Add Attachment", class: "text-sm duration-200 border font-medium focus:outline-none focus:ring-2 inline-flex items-center whitespace-nowrap bg-gray-800 hover:bg-gray-900 text-white justify-center rounded-md shadow-sm border-transparent py-2 px-4", data: {turbo_frame: '_top'} %>
      </div>
    <% end %>
  </div>
<% end %>
